<!doctype html>
<html lang="en" class="no-js">
<head>
    <meta charset="utf-8" />
    <title> 登录</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/signup.css" />
</head>
<body >
<div id="particles">
</div>
<div class="logo">
    iChart
</div>
<div class="intro">
    <h1>专注数据分析,定制你的数据可视化方案</h1>
</div>
<div class="third_line">
    <div class="choose">
        <a href="#" class="normal" id="choose_left" onclick="switchForm_left()">登录</a>
        <a href="#" class="active" id="choose_right" onclick="switchForm_right()">注册</a>
    </div>
</div>
<div class="regist" id="regist">
    <div class="line">
        <input type="text" name="email"  required="required" placeholder="邮箱(E_mail)" id="account_register" />
    </div>
    <div class="line">
        <input type="password" name="password1" required="required" placeholder="密码(至少6位)" id="password_register">
    </div>
    <div class="line">
        <input type="password" name="password2" required="required" placeholder="重新输入密码">
    </div>
    <div class="line">
        <div class="left_part">
            <input type="text"  id="verify" placeholder="验证码">
        </div><!--
              --><div class="right_part">
        <!-- <input type="text" name="checkcode" id="checkCode" class="unchanged" readonly="readonly" onclick="createCode()"> -->
        <div class="verify_box">
            <img src="./image/icon/signup/verify.png">
        </div>
    </div>
    </div>
    <div class="second_line">
        <button id="register_sub" onclick="login()">注册</button>
    </div>
    <p class="agreement_tip">
        点击「注册」按钮，即代表你同意
        <a href="#">iChart服务协议</a>
    </p>
</div>
<div class="login" id="login">
    <div class="line">
        <input type="text" name="login_email"  required="required" placeholder="邮箱(E_mail)"  />
    </div>
    <div class="lastline">
        <input type="password" name="login_password1" required="required" placeholder="密码">
    </div>
    <div class="second_line">
        <button id="login_sub" onclick="login()">登录</button>
    </div>
    <p class="agreement_tip">
        <a href="#">无法登录？</a>
    </p>
</div>
<p class="foot">
    Copyright@ 2017iChart（上海）有限公司.All rights reserved.&nbsp;&nbsp;
    沪ICP备170131165号
</p>
</body>
<script type='text/javascript' src='./script/jquery-3.2.1.min.js'></script>
<script type='text/javascript' src='./script/jquery.particleground.min.js'></script>
<script type='text/javascript' src='./script/demo.js'></script>
<script type="text/javascript" src="./script/jquery.md5.js"></script>
<script type="text/javascript">
    var buttonController=true;//true----注册，false----登录
    function switchForm_left()
    {
        var left=document.getElementById("choose_left");
        var right=document.getElementById("choose_right");
        var regist=document.getElementById("regist");
        var login=document.getElementById("login");
        if(left.className!="active")
        {
            left.className="active";
            right.className="normal";
            regist.style.display="none";
            login.style.display="inline-block";
        }
        buttonController=false;
    }
    function switchForm_right()
    {
        var left=document.getElementById("choose_left");
        var right=document.getElementById("choose_right");
        var regist=document.getElementById("regist");
        var login=document.getElementById("login");
        if(right.className!="active")
        {
            right.className="active";
            left.className="normal";
            regist.style.display="inline-block";
            login.style.display="none";
        }
        buttonController=true;
    }
    function login() {
        if(buttonController){
            console.log("regist");
            var account=document.getElementById("account_register");
            var password=document.getElementById("password_register");
            var xhr = new XMLHttpRequest();
            xhr.withCredentials = true;
            xhr.onreadystatechange=function () {
                if(xhr.readyState===4 && xhr.status ===200){
                    var JSON_obj=JSON.parse(xhr.responseText);
                    var JSON_DOMs=JSON.parse(JSON_obj.result);
                    console.log(JSON_DOMs);
                }
            };
            xhr.open("POST", "http://127.0.0.1:8000/sign_up");
            xhr.send('account='+account+'&password='+password);
        }
        else{
            console.log("login");
        }
    }
</script>
</html>